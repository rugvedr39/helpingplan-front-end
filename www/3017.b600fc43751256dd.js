"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3017],{3017:(O,f,u)=>{u.r(f),u.d(f,{SignupPageModule:()=>x});var _=u(177),r=u(4341),a=u(1075),m=u(8986),e=u(4438),P=u(8793);function b(n,l){1&n&&(e.j41(0,"ion-text",13)(1,"small"),e.EFF(2,"Name is required."),e.k0s()())}function F(n,l){1&n&&(e.j41(0,"ion-text",13)(1,"small"),e.EFF(2,"Password is required."),e.k0s()())}function M(n,l){1&n&&(e.j41(0,"ion-text",13)(1,"small"),e.EFF(2,"Mobile number is required."),e.k0s()())}function C(n,l){1&n&&(e.j41(0,"ion-text",13)(1,"small"),e.EFF(2,"UPI number is required."),e.k0s()())}function v(n,l){1&n&&(e.j41(0,"ion-text",13)(1,"small"),e.EFF(2,"Referral code is required."),e.k0s()())}function h(n,l){if(1&n&&(e.j41(0,"ion-text",14)(1,"div",15),e.EFF(2),e.k0s()()),2&n){const s=e.XpG();e.R7$(2),e.SpI(" ",s.referralData," ")}}const S=[{path:"",component:(()=>{var n;class l{constructor(t,i){this.userDataService=t,this.route=i,this.signupForm=new r.gE({name:new r.MJ("",r.k0.required),email:new r.MJ(""),password:new r.MJ("",r.k0.required),mobile_number:new r.MJ("",r.k0.required),bank_details:new r.gE({bank_name:new r.MJ(""),account_number:new r.MJ(""),ifsc_code:new r.MJ("")}),upi_number:new r.MJ("",r.k0.required),referral_code:new r.MJ("",r.k0.required)}),this.populateReferralCodeFromURL()}populateReferralCodeFromURL(){this.route.queryParams.subscribe(t=>{t.token&&(this.signupForm.get("referral_code").setValue(t.token),this.validateReferral())})}validateReferral(){let t=this.signupForm.get("referral_code");return console.log(t.value),new Promise(i=>{null!=t&&t.value?this.userDataService.getUserByReferralCode(t.value).subscribe(o=>{console.log(o),this.referralData=o.name,i(null)},o=>{alert("invalid Referral"),this.referralData=void 0}):i({required:!0})})}signup(){this.signupForm.valid?this.userDataService.createUser(this.signupForm.value).subscribe({next:t=>{var i;console.log(t),alert(`Your UserId is ${t.username}`),this.userDataService.login({username:t.username,password:null===(i=this.signupForm.get("password"))||void 0===i?void 0:i.value}).subscribe({next:o=>{o.token&&(localStorage.setItem("token",o.token),localStorage.setItem("user",JSON.stringify(o.user)),window.location.href="/home"),"User not found"==o.message&&alert("User not found"),"Invalid credentials"==o.message&&alert("Invalid credentials")},error:o=>{alert(o)}})},error:t=>{409===t.status?alert(`Signup failed: ${t.error.message}`):alert("Signup failed. Please try again later.")}}):alert("Please fill in all required fields correctly.")}}return(n=l).\u0275fac=function(t){return new(t||n)(e.rXU(P.J),e.rXU(m.nX))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-signup"]],decls:36,vars:8,consts:[["translucent","true"],[1,"ion-padding"],[1,"signup-form","mb-5"],[3,"ngSubmit","formGroup"],["position","floating"],["formControlName","name","required",""],["color","danger",4,"ngIf"],["formControlName","password","type","password","required",""],["formControlName","mobile_number","type","tel","required",""],["formControlName","upi_number","required",""],["formControlName","referral_code","required","",3,"ionChange"],["color","success",4,"ngIf"],["expand","block",1,"signup-btn","mb-5",3,"click","disabled"],["color","danger"],["color","success"],["role","alert",1,"alert","alert-success","text-capitalize"]],template:function(t,i){if(1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Signup"),e.k0s()()(),e.j41(4,"ion-content",1)(5,"div",2)(6,"form",3),e.bIt("ngSubmit",function(){return i.signup()}),e.j41(7,"ion-list")(8,"ion-item")(9,"ion-label",4),e.EFF(10,"Name"),e.k0s(),e.nrm(11,"ion-input",5),e.k0s(),e.DNE(12,b,3,0,"ion-text",6),e.j41(13,"ion-item")(14,"ion-label",4),e.EFF(15,"Password"),e.k0s(),e.nrm(16,"ion-input",7),e.k0s(),e.DNE(17,F,3,0,"ion-text",6),e.j41(18,"ion-item")(19,"ion-label",4),e.EFF(20,"Mobile Number"),e.k0s(),e.nrm(21,"ion-input",8),e.k0s(),e.DNE(22,M,3,0,"ion-text",6),e.j41(23,"ion-item")(24,"ion-label",4),e.EFF(25,"UPI Number"),e.k0s(),e.nrm(26,"ion-input",9),e.k0s(),e.DNE(27,C,3,0,"ion-text",6),e.j41(28,"ion-item")(29,"ion-label",4),e.EFF(30,"Referral Code"),e.k0s(),e.j41(31,"ion-input",10),e.bIt("ionChange",function(){return i.validateReferral()}),e.k0s()(),e.DNE(32,v,3,0,"ion-text",6)(33,h,3,1,"ion-text",11),e.j41(34,"ion-button",12),e.bIt("click",function(){return i.signup()}),e.EFF(35," Signup "),e.k0s()()()()()),2&t){let o,p,d,g,c;e.R7$(6),e.Y8G("formGroup",i.signupForm),e.R7$(6),e.Y8G("ngIf",(null==(o=i.signupForm.get("name"))?null:o.touched)&&(null==(o=i.signupForm.get("name"))?null:o.invalid)),e.R7$(5),e.Y8G("ngIf",(null==(p=i.signupForm.get("password"))?null:p.touched)&&(null==(p=i.signupForm.get("password"))?null:p.invalid)),e.R7$(5),e.Y8G("ngIf",(null==(d=i.signupForm.get("mobile_number"))?null:d.touched)&&(null==(d=i.signupForm.get("mobile_number"))?null:d.invalid)),e.R7$(5),e.Y8G("ngIf",(null==(g=i.signupForm.get("upi_number"))?null:g.touched)&&(null==(g=i.signupForm.get("upi_number"))||null==g.errors?null:g.errors.required)),e.R7$(5),e.Y8G("ngIf",(null==(c=i.signupForm.get("referral_code"))?null:c.touched)&&(null==(c=i.signupForm.get("referral_code"))||null==c.errors?null:c.errors.required)),e.R7$(),e.Y8G("ngIf",void 0!==i.referralData),e.R7$(),e.Y8G("disabled",!i.signupForm.valid)}},dependencies:[_.bT,r.qT,r.BC,r.cb,r.YS,a.Jm,a.W9,a.eU,a.$w,a.uz,a.he,a.nf,a.IO,a.BC,a.ai,a.Gw,r.j4,r.JD],styles:[".signup-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.signup-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{box-shadow:0 4px 20px #0000000d;border-radius:8px}.signup-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);color:#fff;text-align:center}.signup-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:20px}.signup-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: #fff;--padding-start: 0;--padding-end: 0;--inner-padding-start: 8px;--inner-padding-end: 8px;--border-radius: 8px;margin-top:10px}.signup-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--padding-start: 5px;--padding-end: 5px}.signup-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{margin-top:5px;margin-left:10px}.signup-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:20px;--background: var(--ion-color-primary);--background-activated: var(--ion-color-primary-tint);--background-hover: var(--ion-color-primary-shade)}"]}),l})()}];let k=(()=>{var n;class l{}return(n=l).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[m.iI.forChild(S),m.iI]}),l})(),x=(()=>{var n;class l{}return(n=l).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[_.MD,r.YN,a.bv,k,r.X1]}),l})()}}]);