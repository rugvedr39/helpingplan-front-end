"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7926],{7926:(P,u,i)=>{i.r(u),i.d(u,{TransferEpinPageModule:()=>F});var f=i(177),c=i(4341),a=i(1075),p=i(8986),g=i(467),e=i(4438),m=i(8793),T=i(5880);function h(n,s){if(1&n&&(e.j41(0,"ion-item")(1,"ion-label"),e.EFF(2),e.k0s()()),2&n){const o=e.XpG();e.R7$(2),e.SpI(" Transfer To Name: ",o.referralData.name," ")}}let E=(()=>{var n;class s{constructor(r,t,l){this.modalCtrl=r,this.userDataService=t,this.epinService=l,this.referralCode="",this.refralUsername=""}validateReferral(){this.referralCode&&this.userDataService.getUserByReferralCode(this.refralUsername).subscribe(r=>{this.referralData=r},r=>{console.error("Invalid Referral:",r)})}transfer(){const r=JSON.parse(localStorage.getItem("user")||"{}");this.referralCode&&this.referralData&&this.epinService.transferEpin({code:this.referralCode,transferredById:r.id,transferredtoId:this.referralData.id}).subscribe({next:t=>{alert("Transfer successful"),this.dismissModal()},error:t=>{console.error("Transfer failed:",t)}})}dismissModal(){this.modalCtrl.dismiss()}}return(n=s).\u0275fac=function(r){return new(r||n)(e.rXU(a.W3),e.rXU(m.J),e.rXU(T.u))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-transfer-modal"]],inputs:{referralCode:"referralCode"},decls:17,vars:2,consts:[["slot","end"],[3,"click"],["position","floating"],[3,"ngModelChange","ngModel"],[4,"ngIf"],["expand","full",3,"click"],["expand","full","ngif","this.referralCode",3,"click"]],template:function(r,t){1&r&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Transfer E-Pin"),e.k0s(),e.j41(4,"ion-buttons",0)(5,"ion-button",1),e.bIt("click",function(){return t.dismissModal()}),e.EFF(6,"Close"),e.k0s()()()(),e.j41(7,"ion-content")(8,"ion-item")(9,"ion-label",2),e.EFF(10,"Transfer To Username"),e.k0s(),e.j41(11,"ion-input",3),e.mxI("ngModelChange",function(d){return e.DH7(t.refralUsername,d)||(t.refralUsername=d),d}),e.k0s()(),e.DNE(12,h,3,1,"ion-item",4),e.j41(13,"ion-button",5),e.bIt("click",function(){return t.validateReferral()}),e.EFF(14,"Validate Referral"),e.k0s(),e.j41(15,"ion-button",6),e.bIt("click",function(){return t.transfer()}),e.EFF(16,"Transfer Epin"),e.k0s()()),2&r&&(e.R7$(11),e.R50("ngModel",t.refralUsername),e.R7$(),e.Y8G("ngIf",t.referralData))},dependencies:[f.bT,c.BC,c.vS,a.Jm,a.QW,a.W9,a.eU,a.$w,a.uz,a.he,a.BC,a.ai,a.Gw]}),s})();function C(n,s){if(1&n){const o=e.RV6();e.j41(0,"ion-item")(1,"ion-label"),e.EFF(2),e.j41(3,"ion-button",5),e.bIt("click",function(){const t=e.eBV(o).$implicit,l=e.XpG();return e.Njj(l.openTransferModal(t.code))}),e.EFF(4,"Transfer"),e.k0s()()()}if(2&n){const o=s.$implicit;e.R7$(2),e.SpI(" Code: ",o.code," ")}}const M=[{path:"",component:(()=>{var n;class s{constructor(r,t,l){this.epinService=r,this.userDataService=t,this.modalCtrl=l,this.user=JSON.parse(localStorage.getItem("user")||"{}"),this.unusedEPins=[],this.showModal=!1}ngOnInit(){this.loadUnusedEPins(this.user.id)}loadUnusedEPins(r){this.epinService.getUnusedEPinReport(r).subscribe({next:t=>{this.unusedEPins=t},error:t=>{console.error("There was an error!",t)}})}openTransferModal(r){var t=this;return(0,g.A)(function*(){return yield(yield t.modalCtrl.create({component:E,componentProps:{referralCode:r}})).present()})()}}return(n=s).\u0275fac=function(r){return new(r||n)(e.rXU(T.u),e.rXU(m.J),e.rXU(a.W3))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-transfer-epin"]],decls:11,vars:3,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(r,t){1&r&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"TransferEpin"),e.k0s()()(),e.j41(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),e.EFF(8,"TransferEpin"),e.k0s()()(),e.j41(9,"ion-list"),e.DNE(10,C,5,1,"ion-item",4),e.k0s()()),2&r&&(e.Y8G("translucent",!0),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(6),e.Y8G("ngForOf",t.unusedEPins))},dependencies:[f.Sq,a.Jm,a.W9,a.eU,a.uz,a.he,a.nf,a.BC,a.ai]}),s})()}];let v=(()=>{var n;class s{}return(n=s).\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[p.iI.forChild(M),p.iI]}),s})(),F=(()=>{var n;class s{}return(n=s).\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[f.MD,c.YN,a.bv,v]}),s})()}}]);